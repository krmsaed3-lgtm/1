<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Jopai Chat</title>
  <style>
    :root{
      --bg:#0C0B10;
      --panel:#05070f;
      --stroke:rgba(255,255,255,.08);
      --text:#ffffff;
      --muted:#9ca3af;

      --run-blue:#18C1FF;
      --run-green:#22E1A5;
      --grad: linear-gradient(90deg, var(--run-blue), var(--run-green));

      --nav-h: 72px;
      --nav-pad: calc(env(safe-area-inset-bottom, 0px) + 10px);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: radial-gradient(1200px 600px at 20% -10%, rgba(24,193,255,.12), transparent 55%),
                  radial-gradient(900px 500px at 90% 0%, rgba(34,225,165,.10), transparent 55%),
                  var(--bg);
      color:var(--text);
    }
    .wrap{
      max-width:480px;margin:0 auto;min-height:100vh;
      padding-bottom: calc(var(--nav-h) + var(--nav-pad) + 18px);
    }
    .top{
      position:sticky;top:0;z-index:10;
      display:flex;align-items:center;justify-content:center;
      padding:14px 12px;
      background:rgba(12,11,16,.88);
      backdrop-filter: blur(10px);
      border-bottom:1px solid rgba(255,255,255,.06);
      font-weight:900;letter-spacing:.2px;
    }
    .msgs{
      padding:14px 12px 10px;
      display:flex;flex-direction:column;gap:10px;
      min-height:55vh;
    }
    .b{
      max-width:88%;
      padding:10px 12px;
      border-radius:14px;
      line-height:1.35;
      white-space:pre-wrap;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
    }
    .me{align-self:flex-start;border:1px solid rgba(24,193,255,.22);background: rgba(24,193,255,.12);}
    .ai{align-self:flex-end;}

    /* composer sits ABOVE bottom nav */
    .composer{
      position:fixed;
      left:0; right:0;
      bottom: calc(var(--nav-h) + var(--nav-pad));
      padding:10px 12px 12px;
      background:rgba(12,11,16,.88);
      backdrop-filter: blur(10px);
      border-top:1px solid rgba(255,255,255,.06);
      z-index:998;
    }
    .composer-inner{max-width:480px;margin:0 auto;}
    .row{display:flex;gap:10px;align-items:center}
    .chat-input{
      flex:1;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background:#101019;
      color:#fff;
      outline:none;
    }
    .send-btn{
      width:50px;height:44px;
      border-radius:12px;
      border:0;
      background: var(--grad);
      color:#05060b;
      font-size:18px;
      font-weight:900;
      cursor:pointer;
    }
    .send-btn:disabled{opacity:.6}

    /* Bottom nav (FIXED + safe area) */
    .bottom-nav{
      direction:ltr;
      position:fixed;left:0;right:0;bottom:0;
      height:var(--nav-h);
      padding:8px 0 var(--nav-pad);
      background:#0C0B10;
      box-shadow:0 -1px 0 rgba(255,255,255,.04);
      display:flex;align-items:flex-start;justify-content:space-around;
      z-index:999;
    }
    .bottom-item{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;font-size:11px;color:#7b8593;cursor:pointer}
    .bottom-icon-img{width:26px;height:26px;object-fit:contain}
    .bottom-item.power .bottom-icon-img.power-img{width:40px;height:40px;border-radius:999px}
    .bottom-item.active span{color:#00d1ff}
    @media (min-width:480px){
      .bottom-nav{left:50%;right:auto;transform:translateX(-50%);max-width:480px;}
      .composer{left:50%;right:auto;transform:translateX(-50%);max-width:480px;}
    }

    /* iPhone keyboard fix: when typing, hide bottom nav + move composer down */
    body.kb .bottom-nav{display:none;}
    body.kb .composer{bottom: env(safe-area-inset-bottom, 0px);}
    body.kb .wrap{padding-bottom: 90px;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">Jopai</div>

    <div id="chatLog" class="msgs">
      <div class="b ai">ÿ£ŸáŸÑÿßŸã ü§ç ÿ£ŸÜÿß Jopai. ÿßŸÉÿ™ÿ®Ÿä ÿ≥ÿ§ÿßŸÑŸÉ ÿ™ÿ≠ÿ™.</div>
    </div>
  </div>

  <div class="composer">
    <div class="composer-inner">
      <div class="row">
        <input class="chat-input" type="text" placeholder="ÿßŸÉÿ™ÿ® ÿ≥ÿ§ÿßŸÑŸÉ ŸáŸÜÿß..." />
        <button class="send-btn" type="button">‚û§</button>
      </div>
    </div>
  </div>

  <nav class="bottom-nav">
  <div class="bottom-item mine" data-go="mine.html">
      <img alt="Mine" class="bottom-icon-img" src="images/mine-icon.png"/>
      <span>Mine</span>
    </div>
  <div class="bottom-item assets" data-go="my-assets.html">
      <img alt="Assets" class="bottom-icon-img" src="images/assets-icon.png"/>
      <span>Assets</span>
    </div>
  <div class="bottom-item power" data-go="ai-power.html">
      <img alt="AI Power" class="bottom-icon-img power-img" src="images/ai-power.gif"/>
      <span>AI Power</span>
    </div>
  <div class="bottom-item chat active" data-go="ai-chat.html">
      <img alt="AI Chat" class="bottom-icon-img" src="images/chat-icon.png"/>
      <span>AI Chat</span>
    </div>
  <div class="bottom-item tools" data-go="ai-tools.html">
      <img alt="AI‚ÄìTools" class="bottom-icon-img" src="images/tools-icon.png"/>
      <span>AI‚ÄìTools</span>
    </div>
</nav>

  <script src="sb-config.js"></script>
  <script src="auth.js"></script>
  <script src="sb-user.js"></script>
  <script src="jopai.js"></script>

  <script>
    // Bottom nav navigation
    document.querySelectorAll('.bottom-item').forEach(function(item){
      item.addEventListener('click', function(){
        var href = item.getAttribute('data-go');
        if (href) window.location.href = href;
      });
    });

    // Keyboard handling (iOS): hide bottom nav when typing
    var input = document.querySelector('.chat-input');
    if (input){
      input.addEventListener('focus', function(){ document.body.classList.add('kb'); });
      input.addEventListener('blur', function(){ setTimeout(function(){ document.body.classList.remove('kb'); }, 120); });
    }
  </script>
</body>
</html>
