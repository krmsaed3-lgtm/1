<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Account Information</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<style>
    :root {
      --page-bg: #0C0B10;
      --card-bg: #17202D;
      --card-inner-bg: #050812;
      --text-primary: #ffffff;
      --text-secondary: rgba(255, 255, 255, 0.55);
      --accent: #00d1ff;
      --border-subtle: #233246;
      --row-divider: #151b26;
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background-color: var(--page-bg);
      color: var(--text-primary);
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, sans-serif;
    }

    .app {
      min-height: 100vh;
      max-width: 480px;
      margin: 0 auto;
      background-color: var(--page-bg);
    }

    .app-header {
      position: sticky;
      top: 0;
      z-index: 10;
      height: 48px;
      display: flex;
      align-items: center;
      padding: 0 12px;
      background: #000000;
    }

    .back-btn {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      margin-right: 8px;
      background: rgba(11, 12, 16, 0.95);
    }

    .back-arrow {
      width: 10px;
      height: 10px;
      border-left: 2px solid #ffffff;
      border-bottom: 2px solid #ffffff;
      transform: rotate(45deg);
    }

    .app-header-title {
      flex: 1;
      text-align: center;
      margin-right: 40px;
      font-size: 15px;
      font-weight: 500;
    }

    .app-main {
      padding: 16px 12px 24px;
    }

    .content {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .card {
      background-color: var(--card-bg);
      border-radius: 16px;
      padding: 10px 14px;
      border: 1px solid var(--border-subtle);
    }

    .row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 0;
    }

    .row + .row {
      border-top: 1px solid var(--row-divider);
    }

    .label {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .value {
      font-size: 13px;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .value-link {
      font-size: 13px;
      color: var(--text-primary);
      border-bottom: 0.5px solid var(--text-primary);
      padding-bottom: 1px;
    }

    .value-accent {
      color: var(--accent);
    }

    .avatar-wrapper {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
      border: 1px solid #333a4c;
      background-color: var(--card-inner-bg);
    }

    .avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .chevron {
      width: 6px;
      height: 6px;
      border-right: 1px solid var(--text-secondary);
      border-bottom: 1px solid var(--text-secondary);
      transform: rotate(-45deg);
      margin-left: 2px;
    }

    .copy-wrapper {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .copy-icon {
      width: 14px;
      height: 14px;
      border-radius: 3px;
      border: 1px solid var(--text-secondary);
      position: relative;
      cursor: pointer;
    }

    .copy-icon::before,
    .copy-icon::after {
      content: "";
      position: absolute;
      border: 1px solid var(--text-secondary);
      border-radius: 2px;
    }

    .copy-icon::before {
      width: 8px;
      height: 6px;
      left: 3px;
      top: 3px;
      border-top: 1px solid transparent;
      border-left: 1px solid transparent;
    }

    .copy-icon::after {
      width: 8px;
      height: 6px;
      left: 1px;
      top: 1px;
      border-bottom: 1px solid transparent;
      border-right: 1px solid transparent;
    }

    .toast-message {
      position: fixed;
      left: 50%;
      top: 110px;
      transform: translate(-50%, -10px);
      padding: 8px 14px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.82);
      color: #ffffff;
      font-size: 12px;
      line-height: 1.4;
      max-width: 80%;
      text-align: center;
      z-index: 200;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.18s ease-out, transform 0.18s ease-out;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
    }

    .toast-message.toast-visible {
      opacity: 1;
      transform: translate(-50%, 0);
    }

    @media (min-width: 481px) {
      body {
        display: flex;
        justify-content: center;
        background-color: #000;
      }
      .app {
        margin-top: 12px;
        border-radius: 20px;
        border: 1px solid #171924;
        overflow: hidden;
      }
    }
  
/* === AI Robot Buddy Overlay (Prototype) === */
.avatar-shell{
  position: relative;
  width: 40px;
  height: 40px;
}
.avatar-shell .avatar{
  width: 40px;
  height: 40px;
}
.robot-buddy{
  position: absolute;
  right: -8px;
  top: -12px;
  width: 32px;
  height: 32px;
  pointer-events: none;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,0.45));
}
.robot-buddy svg{ width:100%; height:100%; display:block; }

.robot-eye{
  transform-origin: center;
  animation: robotBlink 7s infinite;
}
@keyframes robotBlink{
  0%, 92%, 100% { transform: scaleY(1); }
  94% { transform: scaleY(0.12); }
  96% { transform: scaleY(1); }
}

.robot-hand{
  transform-origin: 26px 26px;
  animation: robotWave 14s infinite;
}
@keyframes robotWave{
  0%, 84% { transform: rotate(0deg); }
  86% { transform: rotate(18deg); }
  88% { transform: rotate(-12deg); }
  90% { transform: rotate(16deg); }
  92% { transform: rotate(-8deg); }
  94% { transform: rotate(10deg); }
  96%, 100% { transform: rotate(0deg); }
}

</style>
</head>
<body>
<div class="app">
<header class="app-header">
<a class="back-btn" href="javascript:history.back()">
<div class="back-arrow"></div>
</a>
<div class="app-header-title">Account Information</div>
</header>
<main class="app-main">
<section class="content">
<!-- Card 1 -->
<section class="card">
<div class="row">
<div class="label">Profile Picture</div>
<div class="avatar-wrapper">
<div class="avatar-shell">
  <div class="avatar">
    <img alt="Avatar" id="account-avatar" src="images/account-avatar.png"/>
  </div>

<div class="robot-buddy" aria-hidden="true">
  <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient id="rbG" x1="0" y1="0" x2="1" y2="0">
        <stop offset="0%" stop-color="#18c1ff"/>
        <stop offset="100%" stop-color="#22e1a5"/>
      </linearGradient>
    </defs>

    <!-- hand (wave) -->
    <g class="robot-hand">
      <path d="M50 32c4 0 7 3 7 7 0 6-6 11-15 11h-3" fill="none" stroke="url(#rbG)" stroke-width="4" stroke-linecap="round"/>
      <path d="M39 50c2-3 3-7 3-11 0-3-1-5-3-7" fill="none" stroke="rgba(255,255,255,0.65)" stroke-width="2" stroke-linecap="round"/>
    </g>

    <!-- head -->
    <g>
      <path d="M16 22c0-7 6-13 13-13h6c7 0 13 6 13 13v10c0 7-6 13-13 13h-6c-7 0-13-6-13-13V22z"
            fill="rgba(0,0,0,0.35)" stroke="url(#rbG)" stroke-width="2"/>
      <path d="M18 23c0-6 5-11 11-11h6c6 0 11 5 11 11v7c0 6-5 11-11 11h-6c-6 0-11-5-11-11v-7z"
            fill="rgba(0,0,0,0.18)"/>

      <!-- eyes -->
      <g class="robot-eye">
        <circle cx="28" cy="30" r="3.4" fill="rgba(255,255,255,0.85)"/>
        <circle cx="36" cy="30" r="3.4" fill="rgba(255,255,255,0.85)"/>
        <circle cx="28" cy="30" r="1.4" fill="url(#rbG)"/>
        <circle cx="36" cy="30" r="1.4" fill="url(#rbG)"/>
      </g>

      <!-- mouth -->
      <path d="M27 40h10" stroke="rgba(255,255,255,0.55)" stroke-width="2" stroke-linecap="round"/>

      <!-- antenna -->
      <path d="M32 7v6" stroke="url(#rbG)" stroke-width="2" stroke-linecap="round"/>
      <circle cx="32" cy="6" r="2.2" fill="url(#rbG)"/>
    </g>
  </svg>
</div>

</div>
<div class="chevron"></div>
</div>
</div>
<div class="row">
<div class="label">ID</div>
<div class="value copy-wrapper">
<span id="user-id">90440407</span>
<div class="copy-icon" id="copy-id"></div>
</div>
</div>
<div class="row">
<div class="label">Phone</div>
<div class="value">
<span class="value-link account-phone-value">70758137</span>
</div>
</div>
</section>
</section>
</main>
</div>
<div class="toast-message" id="toast"></div>
<!-- Load Supabase configuration -->
<script src="sb-config.js"></script>
<!-- Authentication helpers -->
<script src="auth.js"></script>
<!-- User profile helpers -->
<script src="sb-user.js"></script><script src="avatar.js"></script>
<!-- Enforce login redirects -->
<script src="common-nav.js"></script>
<script>
    
    // Load dynamic account data from demoCurrentUser + DemoWallet (if available)
    (function () {
  function safeText(v, fallback) {
    if (v === null || v === undefined) return fallback;
    var t = String(v).trim();
    return t ? t : fallback;
  }

  function formatDateTime(iso, fallback) {
    try {
      if (!iso) return fallback;
      var d = new Date(iso);
      if (!isFinite(d.getTime())) return fallback;
      var pad = function (n) { return (n < 10 ? "0" : "") + n; };
      return d.getFullYear() + "-" + pad(d.getMonth() + 1) + "-" + pad(d.getDate()) + " " +
             pad(d.getHours()) + ":" + pad(d.getMinutes()) + ":" + pad(d.getSeconds());
    } catch (e) { return fallback; }
  }

  async function paintFromSupabase() {
    try {
      if (!window.SBUser || typeof window.SBUser.getCurrentProfile !== "function") return;

      var profile = await window.SBUser.getCurrentProfile();
        if (window.UserAvatar && typeof window.UserAvatar.apply === 'function') {
          window.UserAvatar.apply(profile);
        }
      if (!profile) return;

      var idEl = document.getElementById("user-id");
      if (idEl) idEl.textContent = safeText(profile.publicId || profile.id, "-");

      var phoneEl = document.querySelector(".account-phone-value");
      if (phoneEl) phoneEl.textContent = safeText(profile.phone, "-");
} catch (e) {
      try { console.error(e); } catch (_) {}
    }
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", paintFromSupabase);
  } else {
    paintFromSupabase();
  }
})();
;
;
;
// Copy ID with toast
    (function () {
      var copyBtn = document.getElementById('copy-id');
      var idSpan = document.getElementById('user-id');
      var toastEl = document.getElementById('toast');

      function showToast(message) {
        if (!toastEl) return;
        toastEl.textContent = message;
        toastEl.classList.add('toast-visible');
        window.clearTimeout(showToast._timer);
        showToast._timer = window.setTimeout(function () {
          toastEl.classList.remove('toast-visible');
        }, 1600);
      }

      if (copyBtn && idSpan && navigator.clipboard) {
        copyBtn.addEventListener('click', function () {
          var text = idSpan.textContent || '';
          navigator.clipboard.writeText(text).then(function () {
            showToast('ID copied');
          }).catch(function () {
            showToast('Unable to copy ID');
          });
        });
      } else if (copyBtn && idSpan) {
        copyBtn.addEventListener('click', function () {
          var range = document.createRange();
          range.selectNodeContents(idSpan);
          var selection = window.getSelection();
          selection.removeAllRanges();
          selection.addRange(range);
          try {
            var ok = document.execCommand('copy');
            showToast(ok ? 'ID copied' : 'Unable to copy ID');
          } catch (e) {
            showToast('Unable to copy ID');
          }
          selection.removeAllRanges();
        });
      }
    })();</script>
</body>
</html>
