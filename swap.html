<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Swap</title>
<style>
  :root {
    --bg-color:#05060e;--card-bg:#121622;--text-main:#f5f5f5;--text-sub:#9ba0b8;
    --border-color:#252a3b;--btn-radius:12px;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text",system-ui,sans-serif;background:var(--bg-color);color:var(--text-main);min-height:100vh}
  .app{max-width:480px;margin:0 auto;min-height:100vh;padding-bottom:40px;background:var(--bg-color)}
  .header{position:sticky;top:0;z-index:20;background:var(--bg-color);padding:12px 16px 8px;display:flex;align-items:center;justify-content:space-between}
  .header-left,.header-right{display:flex;align-items:center;gap:16px}
  .header-title{font-size:16px;font-weight:600}
  .icon-btn{width:28px;height:28px;border-radius:999px;border:1px solid #2d3242;display:inline-flex;align-items:center;justify-content:center;background:transparent;padding:0;outline:none}
  .icon-btn img{width:24px;height:24px;display:block}
  main{padding:8px 16px 0}
  .swap-card{background:var(--card-bg);border-radius:16px;padding:12px 14px 14px;border:1px solid var(--border-color)}
  .swap-card + .swap-card{margin-top:12px}
  .swap-card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;font-size:13px}
  .swap-card-header span:first-child{color:var(--text-sub)}
  .balance{color:var(--text-sub)}
  .balance-value{color:#3ac8ff}
  .swap-row{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .amount-input{flex:1;background:#070917;border-radius:10px;padding:10px 12px;border:1px solid #272c40;display:flex;align-items:center;justify-content:space-between;min-height:42px}
  .amount-input input{background:transparent;border:none;outline:none;color:var(--text-main);font-size:14px;width:100%}
  .amount-input input::placeholder{color:var(--text-sub)}
  .max-btn{font-size:13px;font-weight:600;color:#21b1ff;margin-right:8px;cursor:pointer;user-select:none}
  .token-select-wrapper{position:relative}
  .token-select{display:inline-flex;align-items:center;gap:6px;background:#101421;border-radius:999px;padding:6px 10px;border:1px solid #31374a;min-width:92px;justify-content:center;cursor:pointer}
  .token-icon{width:20px;height:20px;border-radius:999px;overflow:hidden;flex-shrink:0}
  .token-icon img{width:100%;height:100%;display:block}
  .token-symbol{font-size:13px;font-weight:600}
  .caret{width:8px;height:8px;border-right:2px solid #7b8195;border-bottom:2px solid #7b8195;transform:rotate(45deg);margin-top:-2px}
  .token-menu{position:absolute;right:0;top:38px;background:#101421;border-radius:10px;border:1px solid #31374a;padding:4px 0;min-width:140px;box-shadow:0 10px 25px rgba(0,0,0,.45);display:none;z-index:40}
  .token-menu.open{display:block}
  .token-option{display:flex;align-items:center;gap:8px;padding:6px 10px;font-size:13px;cursor:pointer}
  .token-option:hover{background:#181d2b}
  .token-option span{font-weight:500}
  .swap-middle{display:flex;justify-content:center;margin:10px 0}
  .swap-middle-circle{width:30px;height:30px;border-radius:999px;background:#14192a;border:1px solid #252a3b;display:flex;align-items:center;justify-content:center;cursor:pointer}
  .swap-middle-circle img{width:14px;height:14px}
  .swap-button{margin-top:16px;margin-bottom:14px}
  .swap-button button{width:100%;border:none;outline:none;border-radius:22px;padding:12px 16px;font-size:15px;font-weight:600;color:#000;background-image:linear-gradient(90deg,#3dd4ff,#54ffae);box-shadow:0 6px 14px rgba(33,232,184,.25);cursor:pointer}
  .swap-button button:disabled{opacity:.5;cursor:not-allowed}
  .swap-info{font-size:12px;color:var(--text-sub);display:flex;flex-direction:column;gap:4px}
  .swap-info-row{display:flex;justify-content:space-between}
  .note{margin-top:10px;color:var(--text-sub);font-size:12px}
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;background:rgba(0,0,0,.65);
    border:1px solid rgba(255,255,255,.08);padding:10px 12px;border-radius:14px;color:var(--text-main);font-size:12px;display:none;max-width:min(420px,92vw)}
  .toast.show{display:block}
</style>
</head>
<body>
<div class="app">
  <header class="header">
    <div class="header-left">
      <button aria-label="Back" class="icon-btn" id="backBtn">
        <img alt="Back" src="images/arrow-right.png"/>
      </button>
      <div class="header-title">Swap</div>
    </div>
    <div class="header-right">
      <button aria-label="Refresh" class="icon-btn" id="refreshBtn">
        <img alt="Refresh" src="images/price-refresh.png"/>
      </button>
      <button aria-label="Record" class="icon-btn" onclick="window.location.href='bills.html'">
        <img alt="Record" src="images/record.png"/>
      </button>
    </div>
  </header>

  <main>
    <section class="swap-card">
      <div class="swap-card-header">
        <span>From</span>
        <span class="balance">Balance: <span class="balance-value" id="from-balance">0</span></span>
      </div>

      <div class="swap-row">
        <div class="amount-input">
          <input id="from-amount" type="number" min="0" step="0.0001" placeholder="0 (min 100)"/>
          <div style="display:flex;align-items:center;gap:4px;">
            <span class="max-btn" id="maxBtn">MAX</span>

            <div class="token-select-wrapper" id="from-token-wrapper">
              <div class="token-select" id="from-token-select">
                <div class="token-icon"><img id="from-token-icon" alt="USDT" src="images/usdt.png"/></div>
                <span class="token-symbol" id="from-token-symbol">USDT</span>
                <span class="caret"></span>
              </div>
              <div class="token-menu" id="from-token-menu"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="swap-middle">
      <div class="swap-middle-circle" id="switchBtn">
        <img alt="Switch" src="images/arrow-right.png"/>
      </div>
    </div>

    <section class="swap-card">
      <div class="swap-card-header">
        <span>To</span>
        <span class="balance">Balance: <span class="balance-value" id="to-balance">0</span></span>
      </div>

      <div class="swap-row">
        <div class="amount-input">
          <input id="to-amount" type="number" min="0" step="0.0001" placeholder="0" readonly/>
          <div style="display:flex;align-items:center;gap:4px;">
            <div class="token-select-wrapper" id="to-token-wrapper">
              <div class="token-select" id="to-token-select">
                <div class="token-icon"><img id="to-token-icon" alt="USDC" src="images/usdc.png"/></div>
                <span class="token-symbol" id="to-token-symbol">USDC</span>
                <span class="caret"></span>
              </div>
              <div class="token-menu" id="to-token-menu"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="swap-button">
      <button type="button" id="swap-btn" disabled>Swap</button>
      <div class="note">Fee: 1% (1 per 100). Demo mode: records to swap_ledger only.</div>
    </div>

    <div class="swap-info">
      <div class="swap-info-row"><span>Rate</span><span id="rate-text">-</span></div>
      <div class="swap-info-row"><span>Fee</span><span id="fee-text">-</span></div>
      <div class="swap-info-row"><span>Expected to get</span><span id="expected-text">-</span></div>
    </div>
  </main>
</div>

<div class="toast" id="toast"></div>

<script src="sb-config.js"></script>
<script src="auth.js"></script>
<script src="wallet.js"></script>
<script src="swap.js"></script>
</body>
</html>
